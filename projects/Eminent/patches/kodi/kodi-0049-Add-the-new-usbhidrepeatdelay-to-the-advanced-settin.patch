From d18506a03072115dd7cccb505fc149f5e8e76df9 Mon Sep 17 00:00:00 2001
From: alex <surkov.alex@gmail.com>
Date: Sun, 28 May 2017 14:18:55 +0300
Subject: [PATCH] Add the new usbhidrepeatdelay to the advanced settings

---
 xbmc/settings/AdvancedSettings.cpp | 2 ++
 xbmc/settings/AdvancedSettings.h   | 1 +
 2 files changed, 3 insertions(+)

diff --git a/xbmc/settings/AdvancedSettings.cpp b/xbmc/settings/AdvancedSettings.cpp
index 9157402..b6888db 100644
--- a/xbmc/settings/AdvancedSettings.cpp
+++ b/xbmc/settings/AdvancedSettings.cpp
@@ -254,6 +254,7 @@ void CAdvancedSettings::Initialize()
 
   m_remoteDelay = 3;
   m_controllerDeadzone = 0.2f;
+  m_usbhidrepeatdelay = 200;
 
   m_playlistAsFolders = true;
   m_detectAsUdf = false;
@@ -1012,6 +1013,7 @@ void CAdvancedSettings::ParseSettingsFile(const std::string &file)
 
   XMLUtils::GetInt(pRootElement, "remotedelay", m_remoteDelay, 0, 20);
   XMLUtils::GetFloat(pRootElement, "controllerdeadzone", m_controllerDeadzone, 0.0f, 1.0f);
+  XMLUtils::GetUInt(pRootElement, "usbhidrepeatdelay", m_usbhidrepeatdelay, 0, 1000);
   XMLUtils::GetUInt(pRootElement, "fanartres", m_fanartRes, 0, 1080);
   XMLUtils::GetUInt(pRootElement, "imageres", m_imageRes, 0, 1080);
   if (XMLUtils::GetString(pRootElement, "imagescalingalgorithm", tmp))
diff --git a/xbmc/settings/AdvancedSettings.h b/xbmc/settings/AdvancedSettings.h
index fc526d1..dc698ef 100644
--- a/xbmc/settings/AdvancedSettings.h
+++ b/xbmc/settings/AdvancedSettings.h
@@ -233,6 +233,7 @@ class CAdvancedSettings : public ISettingCallback, public ISettingsHandler
     StringMapping m_pathSubstitutions;
     int m_remoteDelay; ///< \brief number of remote messages to ignore before repeating
     float m_controllerDeadzone;
+    unsigned int m_usbhidrepeatdelay;
 
     bool m_playlistAsFolders;
     bool m_detectAsUdf;
-- 
1.9.1

